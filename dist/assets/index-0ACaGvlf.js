var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{r as s,a,b as i}from"./vendor-QTd-ifGo.js";import{u as r,O as n,L as l,a as o,B as c,R as d,b as m}from"./router-DibS3lnr.js";import{c as u}from"./supabase-DfFNVlHZ.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var x={exports:{}},h={},g=s,p=Symbol.for("react.element"),b=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,y=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,j={key:!0,ref:!0,__self:!0,__source:!0};function v(e,t,s){var a,i={},r=null,n=null;for(a in void 0!==s&&(r=""+s),void 0!==t.key&&(r=""+t.key),void 0!==t.ref&&(n=t.ref),t)f.call(t,a)&&!j.hasOwnProperty(a)&&(i[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===i[a]&&(i[a]=t[a]);return{$$typeof:p,type:e,key:r,ref:n,props:i,_owner:y.current}}h.Fragment=b,h.jsx=v,h.jsxs=v,x.exports=h;var N=x.exports,w={},k=a;function _(){const[e,t]=s.useState(null),[a,i]=s.useState(!1);s.useEffect(()=>{var e;const s=null==(e=window.Telegram)?void 0:e.WebApp;s?(t(s),i(!0),s.ready(),s.expand(),console.log("üöÄ Telegram WebApp initialized"),console.log("User:",s.initDataUnsafe.user),console.log("Theme:",s.themeParams)):(console.log("‚ö†Ô∏è Telegram WebApp not available (development mode)"),i(!1))},[]);return{webApp:e,isAvailable:a,hapticFeedback:(t,s)=>{if(!e)return;const a=e.HapticFeedback;switch(t){case"impact":a.impactOccurred(s||"medium");break;case"notification":a.notificationOccurred(s||"success");break;case"selection":a.selectionChanged()}},showMainButton:(t,s)=>{e&&(e.MainButton.setText(t),e.MainButton.onClick(s),e.MainButton.show())},hideMainButton:()=>{e&&e.MainButton.hide()},showBackButton:t=>{e&&(e.BackButton.onClick(t),e.BackButton.show())},hideBackButton:()=>{e&&e.BackButton.hide()},sendData:t=>{e&&e.sendData(JSON.stringify(t))},close:()=>{e&&e.close()}}}w.createRoot=k.createRoot,w.hydrateRoot=k.hydrateRoot;const S=u("https://obdlubqqjgbgjhctphcs.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9iZGx1YnFxamdiZ2poY3RwaGNzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1MDE2OTUsImV4cCI6MjA4MDA3NzY5NX0.7pWBVjOLYZEg_7deWsTLGrJaBD7eTyhb1U31oFxlWek");const I=new class{constructor(){t(this,"userId",null)}setUserId(e){this.userId=e}async getCurrentUser(){const{data:{user:e}}=await S.auth.getUser();return e&&(this.userId=e.id),e}async startWorkoutSession(e,t){if(this.userId||await this.getCurrentUser(),!this.userId)return null;const{data:s,error:a}=await S.from("workout_sessions").insert({user_id:this.userId,workout_type:e,workout_name:t,start_time:(new Date).toISOString(),completed:!1}).select().single();return a?(console.error("Errore creazione sessione:",a),null):s}async completeWorkoutSession(e,t,s){const{error:a}=await S.from("workout_sessions").update({end_time:(new Date).toISOString(),completed:!0,total_exercises:t,total_sets:s}).eq("id",e);return!a||(console.error("Errore completamento sessione:",a),!1)}async getRecentSessions(e=10){if(this.userId||await this.getCurrentUser(),!this.userId)return[];const{data:t,error:s}=await S.from("workout_sessions").select("*").eq("user_id",this.userId).order("start_time",{ascending:!1}).limit(e);return s?(console.error("Errore recupero sessioni:",s),[]):t||[]}async saveSet(e,t,s,a,i,r,n){if(this.userId||await this.getCurrentUser(),!this.userId)return null;const{data:l,error:o}=await S.from("workout_sets").insert({session_id:e,user_id:this.userId,exercise_name:t,set_number:s,weight:a,reps:i,target_reps:r,rest_time:n,completed_at:(new Date).toISOString()}).select().single();return o?(console.error("Errore salvataggio set:",o),null):(a&&await this.updatePersonalRecord(t,a,i),l)}async updatePersonalRecord(e,t,s){if(!this.userId)return;const a=t*(36/(37-s)),{data:i}=await S.from("personal_records").select("*").eq("user_id",this.userId).eq("exercise_name",e).single();if(i){const e={};(!i.max_weight||t>i.max_weight)&&(e.max_weight=t),(!i.max_reps||s>i.max_reps)&&(e.max_reps=s),(!i.one_rm||a>i.one_rm)&&(e.one_rm=a,e.achieved_at=(new Date).toISOString()),Object.keys(e).length>0&&await S.from("personal_records").update(e).eq("id",i.id)}else await S.from("personal_records").insert({user_id:this.userId,exercise_name:e,max_weight:t,max_reps:s,one_rm:a})}async getExerciseHistory(e){if(this.userId||await this.getCurrentUser(),!this.userId)return null;const{data:t}=await S.from("workout_sets").select("*").eq("user_id",this.userId).eq("exercise_name",e).order("completed_at",{ascending:!1}).limit(1).single(),{data:s}=await S.from("personal_records").select("*").eq("user_id",this.userId).eq("exercise_name",e).single(),{count:a}=await S.from("workout_sets").select("*",{count:"exact",head:!0}).eq("user_id",this.userId).eq("exercise_name",e);return t?{exercise_name:e,last_weight:t.weight||0,last_reps:t.reps,last_date:t.completed_at,best_weight:(null==s?void 0:s.max_weight)||t.weight||0,best_reps:(null==s?void 0:s.max_reps)||t.reps,total_sessions:a||0}:null}async getStats(){if(this.userId||await this.getCurrentUser(),!this.userId)return{totalWorkouts:0,thisWeek:0,thisMonth:0,lastWorkout:null};const e=new Date,t=new Date(e.getTime()-6048e5),s=new Date(e.getTime()-2592e6),{count:a}=await S.from("workout_sessions").select("*",{count:"exact",head:!0}).eq("user_id",this.userId).eq("completed",!0),{count:i}=await S.from("workout_sessions").select("*",{count:"exact",head:!0}).eq("user_id",this.userId).eq("completed",!0).gte("start_time",t.toISOString()),{count:r}=await S.from("workout_sessions").select("*",{count:"exact",head:!0}).eq("user_id",this.userId).eq("completed",!0).gte("start_time",s.toISOString()),{data:n}=await S.from("workout_sessions").select("*").eq("user_id",this.userId).eq("completed",!0).order("end_time",{ascending:!1}).limit(1).single();return{totalWorkouts:a||0,thisWeek:i||0,thisMonth:r||0,lastWorkout:n||null}}getSuggestedWeight(e){if(!e)return 0;const{last_weight:t,last_reps:s}=e;return s>=10?Math.round(2*(t+2.5))/2:s>=8?t:Math.max(0,Math.round(2*(t-1.25))/2)}async logSupplement(e,t,s){if(this.userId||await this.getCurrentUser(),!this.userId)return!1;const{error:a}=await S.from("supplement_logs").insert({user_id:this.userId,supplement_name:e,timing:t,notes:s});return!a}async getSupplementHistory(e=7){if(this.userId||await this.getCurrentUser(),!this.userId)return[];const t=new Date;t.setDate(t.getDate()-e);const{data:s}=await S.from("supplement_logs").select("*").eq("user_id",this.userId).gte("taken_at",t.toISOString()).order("taken_at",{ascending:!1});return s||[]}},C={user:null,workouts:[],currentSession:null,statistics:null,isLoading:!1,error:null};function E(e,t){switch(t.type){case"SET_USER":return{...e,user:t.payload};case"SET_WORKOUTS":return{...e,workouts:t.payload};case"START_SESSION":return{...e,currentSession:t.payload};case"UPDATE_SESSION":return{...e,currentSession:e.currentSession?{...e.currentSession,...t.payload}:null};case"END_SESSION":return{...e,currentSession:null};case"SET_STATISTICS":return{...e,statistics:t.payload};case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ERROR":return{...e,error:t.payload};default:return e}}const A=s.createContext(null);function M({children:e,user:t}){const[a,i]=s.useReducer(E,{...C,user:t}),r=[{id:"upper_a",name:"üí™ Upper A - Push Dominante",description:"Petto, Spalle, Tricipiti - 40% Compound / 60% Isolation",location:"casa",type:"upper",exercises:[{name:"Spinte Manubri Panca Piana",sets:4,rest_time:120,target_reps:"8-10",equipment:"Manubri + Panca",type:"compound",muscle_group:"petto"},{name:"Overhead Press Rack",sets:4,rest_time:120,target_reps:"6-8",equipment:"Bilanciere + Rack",type:"compound",muscle_group:"spalle"},{name:"Dips Anelli",sets:3,rest_time:120,target_reps:"8-12",equipment:"Anelli",type:"compound",muscle_group:"tricipiti"}]},{id:"lower_a",name:"ü¶µ Lower A - Squat Dominante",description:"Quadricipiti, Glutei, Core - 40% Compound / 60% Isolation",location:"casa",type:"lower",exercises:[{name:"Squat Rack Bilanciere",sets:4,rest_time:180,target_reps:"6-8",equipment:"Bilanciere + Rack",type:"compound",muscle_group:"quadricipiti"},{name:"Front Squat Rack",sets:3,rest_time:150,target_reps:"8-10",equipment:"Bilanciere + Rack",type:"compound",muscle_group:"quadricipiti"}]}],n={loadWorkouts:async()=>{i({type:"SET_LOADING",payload:!0});try{await new Promise(e=>setTimeout(e,1e3)),i({type:"SET_WORKOUTS",payload:r})}catch(e){i({type:"SET_ERROR",payload:"Errore nel caricamento dei workout"})}finally{i({type:"SET_LOADING",payload:!1})}},startWorkout:async e=>{const s=r.find(t=>t.id===e);if(!s)return;const a=await Promise.all(s.exercises.map(async e=>{const t=await I.getExerciseHistory(e.name),s=t?I.getSuggestedWeight(t):0;return{...e,history:t,suggested_weight:s,current_weight:s}})),n={id:Date.now().toString(),workout_id:e,user_id:t.id,start_time:(new Date).toISOString(),status:"active",current_exercise_index:0,current_set:1,exercises_data:a.map(e=>({name:e.name,completed_sets:0,sets_data:[],history:e.history,suggested_weight:e.suggested_weight}))};i({type:"START_SESSION",payload:n})},updateSession:e=>{i({type:"UPDATE_SESSION",payload:e})},endSession:async()=>{i({type:"END_SESSION"})},loadStatistics:async()=>{i({type:"SET_LOADING",payload:!0});try{i({type:"SET_STATISTICS",payload:{total_workouts:45,current_streak:7,best_streak:12,total_exercises:234,weekly_goal:4,monthly_goal:16}})}catch(e){i({type:"SET_ERROR",payload:"Errore nel caricamento delle statistiche"})}finally{i({type:"SET_LOADING",payload:!1})}}};return s.useEffect(()=>{n.loadWorkouts(),n.loadStatistics()},[]),N.jsx(A.Provider,{value:{state:a,dispatch:i,actions:n},children:e})}function P(){const e=s.useContext(A);if(!e)throw new Error("useWorkout must be used within a WorkoutProvider");return e}const z=s.createContext(void 0);function T({children:e}){const[t,a]=s.useState(null),[i,r]=s.useState(null),[n,l]=s.useState(!0);s.useEffect(()=>{S.auth.getSession().then(({data:{session:e}})=>{r(e),a((null==e?void 0:e.user)??null),l(!1)});const{data:{subscription:e}}=S.auth.onAuthStateChange(async(e,t)=>{if(r(t),a((null==t?void 0:t.user)??null),l(!1),"SIGNED_IN"===e&&(null==t?void 0:t.user)){const{data:e}=await S.from("profiles").select("id").eq("user_id",t.user.id).single();e||(await S.from("profiles").insert({user_id:t.user.id,name:"Manuel",age:37,height:173,weight:76,goal:"Aumento massa muscolare"}),await S.from("user_preferences").insert({user_id:t.user.id,weekly_plan:"progressive_rotation",reminder_enabled:!0,theme:"dark"}))}});return()=>e.unsubscribe()},[]);return N.jsx(z.Provider,{value:{user:t,session:i,loading:n,signIn:async(e,t)=>{const{error:s}=await S.auth.signInWithPassword({email:e,password:t});return{error:s}},signUp:async(e,t)=>{const{error:s}=await S.auth.signUp({email:e,password:t});return{error:s}},signOut:async()=>{await S.auth.signOut()},signInWithMagicLink:async e=>{const{error:t}=await S.auth.signInWithOtp({email:e,options:{emailRedirectTo:window.location.origin}});return{error:t}}},children:e})}function O(){const e=s.useContext(z);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var D={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=(e,t)=>{const a=s.forwardRef(({color:a="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:l="",children:o,...c},d)=>{return s.createElement("svg",{ref:d,...D,width:i,height:i,stroke:a,strokeWidth:n?24*Number(r)/Number(i):r,className:["lucide",`lucide-${m=e,m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,l].join(" "),...c},[...t.map(([e,t])=>s.createElement(e,t)),...Array.isArray(o)?o:[o]]);var m});return a.displayName=`${e}`,a},R=q("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),W=q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),B=q("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),L=q("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),U=q("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),F=q("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),$=q("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),G=q("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]),V=q("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),H=q("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),J=q("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Z=q("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Y=q("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),K=q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),X=q("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Q=q("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),ee=q("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),te=q("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]),se=q("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),ae=q("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),ie=q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),re=q("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),ne=q("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),le=q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),oe=q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ce=q("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),de=()=>{const e=r(),{hapticFeedback:t}=_(),s=[{path:"/",icon:H,label:"Home"},{path:"/statistics",icon:L,label:"Stats"},{path:"/ai-coach",icon:Q,label:"Coach"},{path:"/supplements",icon:te,label:"Integratori"},{path:"/settings",icon:ie,label:"Settings"}],a=()=>{t("selection")};return N.jsxs("div",{className:"min-h-screen tg-bg flex flex-col",children:[N.jsx("main",{className:"flex-1 pb-24 safe-area-top",children:N.jsx(n,{})}),N.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-100 safe-area-bottom backdrop-blur-md shadow-lg",children:N.jsx("div",{className:"flex justify-around items-center h-20",children:s.map(({path:t,icon:s,label:i})=>{const r=e.pathname===t;return N.jsxs(l,{to:t,onClick:a,className:"flex flex-col items-center justify-center flex-1 h-full transition-all duration-300 "+(r?"bg-blue-500 text-white shadow-lg":"text-gray-500 hover:text-blue-500 hover:bg-blue-50 active:scale-95"),children:[N.jsx(s,{size:24,className:"mb-1 "+(r?"stroke-2":"stroke-1.5")}),N.jsx("span",{className:"text-xs font-semibold "+(r?"text-white":""),children:i})]},t)})})})]})};const me=()=>{var e;const t=o(),{state:a}=P(),{hapticFeedback:i}=_(),[r,n]=s.useState(null),[l,c]=s.useState(!0);s.useEffect(()=>{(async()=>{var e;try{const t=(null==(e=a.user)?void 0:e.id)||1019529575,s=await async function(e){try{const t=await fetch(`http://localhost:5001/api/stats/${e}`),s=await t.json();if(!s.success||!s.data)throw new Error(s.error||"Errore nel recupero delle statistiche");return s.data}catch(t){throw console.error("Errore API getUserStats:",t),t}}(t);n(s)}catch(t){console.error("Errore caricamento stats:",t)}finally{c(!1)}})()},[a.user]);const d=()=>{i("impact","medium"),t("/workout")},m=e=>{i("selection"),t(`/${e}`)};return l?N.jsx("div",{className:"min-h-screen flex items-center justify-center",children:N.jsxs("div",{className:"text-center",children:[N.jsx("div",{className:"text-4xl mb-4",children:"‚è≥"}),N.jsx("div",{className:"text-lg font-bold",children:"Caricamento..."})]})}):N.jsxs("div",{className:"min-h-screen bg-gray-50 dashboard-container",children:[N.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-8",children:N.jsxs("div",{className:"max-w-4xl mx-auto",children:[N.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Ciao ",null==(e=a.user)?void 0:e.first_name]}),N.jsx("p",{className:"text-gray-600 mb-6",children:"Pronto per l'allenamento di oggi?"}),N.jsxs("button",{onClick:d,className:"inline-flex items-center px-8 py-4 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors haptic-medium shadow-sm",children:[N.jsx(se,{className:"w-5 h-5 mr-2 fill-current"}),"Inizia Workout"]})]})}),N.jsxs("div",{className:"px-4 py-6 space-y-6 pb-20",children:[N.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[N.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:[N.jsxs("div",{className:"flex items-center justify-between mb-2",children:[N.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:N.jsx(V,{className:"w-5 h-5 text-blue-600"})}),N.jsx("span",{className:"text-3xl font-bold text-gray-900",children:(null==r?void 0:r.current_streak)||0})]}),N.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Giorni consecutivi"})]}),N.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:[N.jsxs("div",{className:"flex items-center justify-between mb-2",children:[N.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:N.jsx(B,{className:"w-5 h-5 text-green-600"})}),N.jsx("span",{className:"text-3xl font-bold text-gray-900",children:(null==r?void 0:r.total_workouts)||0})]}),N.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Workout totali"})]})]}),N.jsxs("div",{className:"space-y-4",children:[N.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Azioni rapide"}),N.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[N.jsxs("button",{onClick:()=>m("statistics"),className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200 flex flex-col items-start hover:border-blue-300 transition-colors haptic-light",children:[N.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Statistiche"}),N.jsx("div",{className:"text-xs text-gray-500",children:"Progressi"})]}),N.jsxs("button",{onClick:()=>m("ai-coach"),className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200 flex flex-col items-start hover:border-blue-300 transition-colors haptic-light",children:[N.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Coach AI"}),N.jsx("div",{className:"text-xs text-gray-500",children:"Consigli"})]}),N.jsxs("button",{onClick:()=>m("supplements"),className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200 flex flex-col items-start hover:border-blue-300 transition-colors haptic-light",children:[N.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Integratori"}),N.jsx("div",{className:"text-xs text-gray-500",children:"Piano"})]}),N.jsxs("button",{onClick:()=>m("settings"),className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200 flex flex-col items-start hover:border-blue-300 transition-colors haptic-light",children:[N.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Impostazioni"}),N.jsx("div",{className:"text-xs text-gray-500",children:"Profilo"})]})]})]}),N.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-gray-200",children:[N.jsxs("div",{className:"flex items-center mb-4",children:[N.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:N.jsx(F,{className:"w-5 h-5 text-blue-600"})}),N.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Piano di oggi"})]}),N.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsxs("div",{className:"flex-1",children:[N.jsx("div",{className:"font-semibold text-gray-900 mb-2",children:"Upper A - Push"}),N.jsxs("div",{className:"flex items-center text-gray-600 space-x-4 text-sm",children:[N.jsxs("span",{className:"flex items-center",children:[N.jsx(ne,{className:"w-4 h-4 mr-1"}),"9 esercizi"]}),N.jsxs("span",{className:"flex items-center",children:[N.jsx(ce,{className:"w-4 h-4 mr-1"}),"~60 min"]})]})]}),N.jsxs("button",{onClick:d,className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors haptic-light flex items-center text-sm",children:[N.jsx(se,{className:"w-4 h-4 mr-1 fill-current"}),"Inizia"]})]})})]}),N.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-gray-200",children:[N.jsxs("div",{className:"flex items-center mb-4",children:[N.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:N.jsx(ne,{className:"w-5 h-5 text-green-600"})}),N.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Progresso settimanale"})]}),N.jsxs("div",{className:"flex items-center justify-between mb-4",children:[N.jsxs("div",{children:[N.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[(null==r?void 0:r.week_count)||0,N.jsxs("span",{className:"text-xl text-gray-500",children:["/",(null==r?void 0:r.weekly_goal)||4]})]}),N.jsx("div",{className:"text-sm text-gray-600",children:"Workout completati"})]}),N.jsxs("div",{className:"text-right",children:[N.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[(null==r?void 0:r.week_percentage)||0,"%"]}),N.jsx("div",{className:"text-sm text-gray-600",children:"Obiettivo"})]})]}),N.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:N.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:`${(null==r?void 0:r.week_percentage)||0}%`}})}),N.jsx("div",{className:"flex justify-between gap-1",children:["L","M","M","G","V","S","D"].map((e,t)=>{var s;const a=null==(s=null==r?void 0:r.weekly_workouts)?void 0:s[t],i=(new Date).getDay(),n=t===(0===i?6:i-1);return N.jsxs("div",{className:"flex flex-col items-center",children:[N.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-sm font-semibold "+(a?"bg-green-600 text-white":n?"bg-blue-600 text-white":"bg-gray-100 text-gray-400"),children:e}),N.jsx("div",{className:"text-xs mt-1 text-gray-500",children:a?"‚úì":""})]},`day-${t}`)})})]})]})]})},ue=()=>{const e=o(),{state:t,actions:a}=P(),{hapticFeedback:i,showBackButton:r,hideBackButton:n,hideMainButton:l}=_(),[c,d]=s.useState(0),[m,u]=s.useState(!1),[x,h]=s.useState(""),[g,p]=s.useState("");if(s.useEffect(()=>(r(()=>e("/")),l(),t.currentSession||a.startWorkout("upper_a"),()=>{n()}),[r,l,e,t.currentSession,a]),s.useEffect(()=>{let e;return m&&c>0&&(e=setInterval(()=>{d(e=>e<=1?(u(!1),i("notification","success"),0):e-1)},1e3)),()=>{e&&clearInterval(e)}},[m,c,i]),s.useEffect(()=>{var e;if(!t.currentSession)return;if(!t.workouts.find(e=>{var s;return e.id===(null==(s=t.currentSession)?void 0:s.workout_id)}))return;const s=null==(e=t.currentSession.exercises_data)?void 0:e[t.currentSession.current_exercise_index];(null==s?void 0:s.suggested_weight)?h(s.suggested_weight.toString()):h(""),(null==s?void 0:s.suggested_reps)?p(s.suggested_reps.toString()):p("")},[t.currentSession,t.workouts]),!t.currentSession)return N.jsx("div",{className:"flex items-center justify-center min-h-screen",children:N.jsxs("div",{className:"text-center",children:[N.jsx("div",{className:"text-4xl mb-4",children:"‚è≥"}),N.jsx("div",{className:"tg-text",children:"Caricamento workout..."})]})});const b=t.workouts.find(e=>{var s;return e.id===(null==(s=t.currentSession)?void 0:s.workout_id)});if(!b)return null;const f=b.exercises[t.currentSession.current_exercise_index],y=(t.currentSession.current_exercise_index+1)/b.exercises.length*100,j=()=>{i("impact","medium"),u(!1),d(0),t.currentSession.current_exercise_index<b.exercises.length-1?(a.updateSession({current_exercise_index:t.currentSession.current_exercise_index+1,current_set:1}),h(""),p("")):(i("notification","success"),a.endSession(),e("/"))};return N.jsxs("div",{className:"min-h-screen tg-bg",children:[N.jsxs("div",{className:"sticky top-0 tg-bg border-b border-gray-200 p-4",children:[N.jsxs("div",{className:"flex items-center mb-2",children:[N.jsx("button",{onClick:()=>e("/"),className:"mr-3 p-2 rounded-full tg-secondary-bg haptic-light",children:N.jsx(W,{className:"w-5 h-5 tg-text"})}),N.jsxs("div",{children:[N.jsx("h1",{className:"font-bold tg-text",children:b.name}),N.jsxs("p",{className:"text-sm tg-hint",children:["Esercizio ",t.currentSession.current_exercise_index+1," di ",b.exercises.length]})]})]}),N.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:N.jsx("div",{className:"tg-button h-2 rounded-full transition-all duration-300",style:{width:`${y}%`}})})]}),N.jsxs("div",{className:"p-4 space-y-6",children:[N.jsxs("div",{className:"card",children:[N.jsx("h2",{className:"text-xl font-bold tg-text mb-2",children:f.name}),N.jsxs("div",{className:"flex items-center space-x-4 text-sm tg-hint mb-4",children:[N.jsxs("span",{children:["üéØ ",f.target_reps," reps"]}),N.jsxs("span",{children:["‚è±Ô∏è ",f.rest_time,"s riposo"]}),N.jsxs("span",{children:["üèãÔ∏è ",f.equipment]})]}),N.jsxs("div",{className:"text-lg font-semibold tg-text",children:["Serie ",t.currentSession.current_set," di ",f.sets]})]}),m&&N.jsx("div",{className:"card text-center tg-button",children:N.jsxs("div",{className:"text-white",children:[N.jsx("div",{className:"text-3xl font-bold mb-2",children:(v=c,`${Math.floor(v/60)}:${(v%60).toString().padStart(2,"0")}`)}),N.jsx("div",{className:"text-sm opacity-90",children:"Riposo in corso..."}),c<=10&&c>0&&N.jsx("div",{className:"mt-2 text-lg animate-pulse",children:"Preparati! üî•"})]})}),!m&&N.jsxs("div",{className:"card space-y-4",children:[N.jsx("h3",{className:"font-semibold tg-text",children:"Registra la serie"}),N.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm tg-hint mb-1",children:"Peso (kg)"}),N.jsx("input",{type:"number",value:x,onChange:e=>h(e.target.value),className:"input",placeholder:"0",step:"0.5"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm tg-hint mb-1",children:"Ripetizioni"}),N.jsx("input",{type:"number",value:g,onChange:e=>p(e.target.value),className:"input",placeholder:"0"})]})]}),N.jsxs("button",{onClick:()=>{x&&g&&(i("notification","success"),t.currentSession.current_set<f.sets?(d(f.rest_time),u(!0),a.updateSession({current_set:t.currentSession.current_set+1})):j(),h(""),p(""))},disabled:!x||!g,className:"btn btn-success w-full py-3 haptic-medium disabled:opacity-50",children:[N.jsx($,{className:"w-5 h-5 mr-2"}),"Completa Serie"]})]}),m&&N.jsxs("div",{className:"flex space-x-3",children:[N.jsxs("button",{onClick:()=>{u(!1),d(0)},className:"btn btn-secondary flex-1 py-3 haptic-light",children:[N.jsx(se,{className:"w-5 h-5 mr-2"}),"Salta Riposo"]}),t.currentSession.current_set>=f.sets&&N.jsxs("button",{onClick:j,className:"btn btn-primary flex-1 py-3 haptic-medium",children:[N.jsx(re,{className:"w-5 h-5 mr-2"}),"Prossimo Esercizio"]})]}),N.jsxs("div",{className:"card",children:[N.jsx("h3",{className:"font-semibold tg-text mb-3",children:"Esercizi del Workout"}),N.jsx("div",{className:"space-y-2",children:b.exercises.map((e,s)=>N.jsxs("div",{className:"p-3 rounded-lg flex items-center justify-between "+(s===t.currentSession.current_exercise_index?"tg-button text-white":s<t.currentSession.current_exercise_index?"bg-green-100 text-green-800":"tg-secondary-bg tg-text"),children:[N.jsxs("div",{children:[N.jsx("div",{className:"font-medium",children:e.name}),N.jsxs("div",{className:"text-sm opacity-75",children:[e.sets," serie √ó ",e.target_reps]})]}),s===t.currentSession.current_exercise_index?N.jsx("div",{className:"text-sm",children:"In corso"}):s<t.currentSession.current_exercise_index?N.jsx($,{className:"w-5 h-5"}):null]},s))})]})]})]});var v},xe=()=>{const{state:e}=P(),t=e.statistics||{},s=[{title:"Workout Totali",value:t.total_workouts||0,icon:le,color:"text-blue-500",bgColor:"bg-blue-50"},{title:"Streak Attuale",value:`${t.current_streak||0} giorni`,icon:ne,color:"text-green-500",bgColor:"bg-green-50"},{title:"Miglior Streak",value:`${t.best_streak||0} giorni`,icon:B,color:"text-yellow-500",bgColor:"bg-yellow-50"},{title:"Esercizi Totali",value:t.total_exercises||0,icon:F,color:"text-purple-500",bgColor:"bg-purple-50"}];return N.jsxs("div",{className:"p-4 space-y-6",children:[N.jsxs("div",{className:"text-center py-4",children:[N.jsx("h1",{className:"text-2xl font-bold tg-text mb-2",children:"üìä Statistiche"}),N.jsx("p",{className:"tg-hint",children:"I tuoi progressi nel fitness"})]}),N.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.map((e,t)=>N.jsxs("div",{className:"card text-center",children:[N.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full ${e.bgColor} mb-3`,children:N.jsx(e.icon,{className:`w-6 h-6 ${e.color}`})}),N.jsx("div",{className:"text-2xl font-bold tg-text mb-1",children:e.value}),N.jsx("div",{className:"text-sm tg-hint",children:e.title})]},t))}),N.jsxs("div",{className:"card",children:[N.jsx("h3",{className:"font-semibold tg-text mb-4",children:"Progresso Settimanale"}),N.jsx("div",{className:"space-y-3",children:["Lun","Mar","Mer","Gio","Ven","Sab","Dom"].map((e,t)=>N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("span",{className:"tg-text font-medium",children:e}),N.jsx("div",{className:"w-4 h-4 rounded-full "+(t<3?"bg-green-500":"tg-secondary-bg")})]},e))})]}),N.jsxs("div",{className:"card",children:[N.jsx("h3",{className:"font-semibold tg-text mb-4",children:"Obiettivi Mensili"}),N.jsxs("div",{className:"space-y-4",children:[N.jsxs("div",{children:[N.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[N.jsx("span",{className:"tg-text",children:"Workout"}),N.jsx("span",{className:"tg-hint",children:"12/16"})]}),N.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:N.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"75%"}})})]}),N.jsxs("div",{children:[N.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[N.jsx("span",{className:"tg-text",children:"Consistenza"}),N.jsx("span",{className:"tg-hint",children:"85%"})]}),N.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:N.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"85%"}})})]})]})]}),N.jsxs("div",{className:"card",children:[N.jsx("h3",{className:"font-semibold tg-text mb-4",children:"Workout Recenti"}),N.jsx("div",{className:"space-y-3",children:[{name:"Upper A",date:"Oggi",duration:"58 min"},{name:"Lower A",date:"Ieri",duration:"62 min"},{name:"Upper B",date:"2 giorni fa",duration:"55 min"}].map((e,t)=>N.jsxs("div",{className:"flex items-center justify-between p-3 tg-secondary-bg rounded-lg",children:[N.jsxs("div",{children:[N.jsx("div",{className:"font-medium tg-text",children:e.name}),N.jsx("div",{className:"text-sm tg-hint",children:e.date})]}),N.jsx("div",{className:"text-sm tg-hint",children:e.duration})]},t))})]})]})},he=()=>{const[e,t]=s.useState([{id:"1",text:"Ciao Manuel! üëã Sono Alex, il tuo AI Personal Trainer. Come posso aiutarti oggi?",sender:"ai",timestamp:new Date}]),[a,i]=s.useState(""),[r,n]=s.useState(!1),{hapticFeedback:l}=_(),o=async()=>{if(!a.trim()||r)return;l("selection");const e={id:Date.now().toString(),text:a,sender:"user",timestamp:new Date};t(t=>[...t,e]),i(""),n(!0),setTimeout(()=>{const e={id:(Date.now()+1).toString(),text:c(),sender:"ai",timestamp:new Date};t(t=>[...t,e]),n(!1)},1500)},c=e=>{const t=["Ottima domanda! Per il tuo obiettivo di massa muscolare, ti consiglio di mantenere il range 8-12 ripetizioni con carichi progressivi. üí™","Ricorda che il recupero √® importante quanto l'allenamento. Assicurati di dormire 7-8 ore per notte! üò¥","Per massimizzare i risultati, concentrati sulla forma corretta piuttosto che sul peso massimo. La qualit√† batte sempre la quantit√†! üéØ","Hai fatto un ottimo lavoro questa settimana! La costanza √® la chiave del successo nel fitness. Continua cos√¨! üî•","Ti suggerisco di aumentare gradualmente il peso quando riesci a completare tutte le serie nel range superiore di ripetizioni. üìà"];return t[Math.floor(Math.random()*t.length)]};return N.jsxs("div",{className:"flex flex-col h-screen tg-bg",children:[N.jsx("div",{className:"sticky top-0 tg-bg border-b border-gray-200 p-4",children:N.jsxs("div",{className:"flex items-center",children:[N.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mr-3",children:N.jsx(Q,{className:"w-5 h-5 text-white"})}),N.jsxs("div",{children:[N.jsx("h1",{className:"font-bold tg-text",children:"Coach Alex"}),N.jsx("p",{className:"text-sm tg-hint",children:"Il tuo AI Personal Trainer"})]})]})}),N.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.map(e=>{return N.jsx("div",{className:"flex "+("user"===e.sender?"justify-end":"justify-start"),children:N.jsxs("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-2xl "+("user"===e.sender?"tg-button text-white":"tg-secondary-bg tg-text"),children:[N.jsx("p",{className:"text-sm",children:e.text}),N.jsx("p",{className:"text-xs mt-1 "+("user"===e.sender?"text-white opacity-75":"tg-hint"),children:(t=e.timestamp,t.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}))})]})},e.id);var t}),r&&N.jsx("div",{className:"flex justify-start",children:N.jsx("div",{className:"tg-secondary-bg tg-text px-4 py-2 rounded-2xl",children:N.jsxs("div",{className:"flex space-x-1",children:[N.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),N.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),N.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),N.jsx("div",{className:"sticky bottom-0 tg-bg border-t border-gray-200 p-4",children:N.jsxs("div",{className:"flex items-center space-x-2",children:[N.jsx("input",{type:"text",value:a,onChange:e=>i(e.target.value),onKeyPress:e=>"Enter"===e.key&&o(),placeholder:"Scrivi un messaggio...",className:"flex-1 input",disabled:r}),N.jsx("button",{onClick:o,disabled:!a.trim()||r,className:"btn btn-primary p-3 haptic-light disabled:opacity-50",children:N.jsx(ae,{className:"w-5 h-5"})})]})}),N.jsx("div",{className:"p-4 pt-0",children:N.jsx("div",{className:"flex flex-wrap gap-2",children:["Come migliorare la forma?","Consigli per la massa","Gestione del riposo","Progressione pesi"].map(e=>N.jsx("button",{onClick:()=>{i(e),l("selection")},className:"btn btn-secondary text-xs px-3 py-1 haptic-light",children:e},e))})})]})},ge=()=>{var e,t,s,a,i,r,n,l,o,c,d;const{state:m}=P(),{hapticFeedback:u,close:x}=_(),h=[{title:"Profilo",items:[{icon:oe,label:"Informazioni Personali",value:`${null==(e=m.user)?void 0:e.first_name} ${(null==(t=m.user)?void 0:t.last_name)||""}`.trim(),action:()=>u("selection")},{icon:G,label:"Obiettivi Fitness",value:"Aumento massa muscolare",action:()=>u("selection")}]},{title:"Allenamento",items:[{icon:U,label:"Promemoria",value:"Attivi",action:()=>u("selection")},{icon:G,label:"Piano Settimanale",value:"Upper/Lower Split",action:()=>u("selection")}]},{title:"Interfaccia",items:[{icon:ee,label:"Tema",value:"Telegram Auto",action:()=>u("selection")}]},{title:"Altro",items:[{icon:J,label:"Informazioni App",value:"v1.0.0",action:()=>u("selection")},{icon:K,label:"Chiudi App",value:"",action:()=>{u("impact","medium"),x()}}]}];return N.jsxs("div",{className:"p-4 space-y-6",children:[N.jsxs("div",{className:"text-center py-4",children:[N.jsx("div",{className:"text-4xl mb-2",children:"‚öôÔ∏è"}),N.jsx("h1",{className:"text-2xl font-bold tg-text mb-2",children:"Impostazioni"}),N.jsx("p",{className:"tg-hint",children:"Personalizza la tua esperienza"})]}),N.jsxs("div",{className:"card text-center",children:[N.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-3",children:N.jsx("span",{className:"text-2xl text-white",children:(null==(a=null==(s=m.user)?void 0:s.first_name)?void 0:a.charAt(0))||"M"})}),N.jsxs("h3",{className:"font-semibold tg-text",children:[null==(i=m.user)?void 0:i.first_name," ",(null==(r=m.user)?void 0:r.last_name)||""]}),N.jsxs("p",{className:"text-sm tg-hint",children:["@",(null==(n=m.user)?void 0:n.username)||"username"]}),N.jsxs("div",{className:"mt-3 text-xs tg-hint",children:["ID: ",null==(l=m.user)?void 0:l.id]})]}),h.map((e,t)=>N.jsxs("div",{className:"space-y-3",children:[N.jsx("h3",{className:"font-semibold tg-text text-sm uppercase tracking-wide",children:e.title}),N.jsx("div",{className:"card space-y-0 p-0 overflow-hidden",children:e.items.map((t,s)=>N.jsxs("button",{onClick:t.action,className:"w-full flex items-center justify-between p-4 text-left transition-colors hover:tg-secondary-bg haptic-light "+(s<e.items.length-1?"border-b border-gray-100":""),children:[N.jsxs("div",{className:"flex items-center space-x-3",children:[N.jsx("div",{className:"w-8 h-8 tg-secondary-bg rounded-lg flex items-center justify-center",children:N.jsx(t.icon,{className:"w-4 h-4 tg-text"})}),N.jsx("span",{className:"font-medium tg-text",children:t.label})]}),t.value&&N.jsx("span",{className:"text-sm tg-hint",children:t.value})]},s))})]},t)),N.jsxs("div",{className:"card",children:[N.jsx("h3",{className:"font-semibold tg-text mb-3",children:"Riepilogo Attivit√†"}),N.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[N.jsxs("div",{children:[N.jsx("div",{className:"text-xl font-bold tg-link",children:(null==(o=m.statistics)?void 0:o.total_workouts)||0}),N.jsx("div",{className:"text-xs tg-hint",children:"Workout"})]}),N.jsxs("div",{children:[N.jsx("div",{className:"text-xl font-bold tg-link",children:(null==(c=m.statistics)?void 0:c.current_streak)||0}),N.jsx("div",{className:"text-xs tg-hint",children:"Streak"})]}),N.jsxs("div",{children:[N.jsx("div",{className:"text-xl font-bold tg-link",children:(null==(d=m.statistics)?void 0:d.total_exercises)||0}),N.jsx("div",{className:"text-xs tg-hint",children:"Esercizi"})]})]})]}),N.jsxs("div",{className:"text-center text-xs tg-hint space-y-1",children:[N.jsx("div",{children:"Phoenix Workout Mini App"}),N.jsx("div",{children:"Versione 1.0.0"}),N.jsx("div",{children:"Sviluppato per Manuel"})]})]})},pe=()=>{const{hapticFeedback:e}=_(),[t]=s.useState(!0),[a,i]=s.useState([{name:"Creatina Creapure",dosage:"5g",timing:"Post-workout",benefits:"Forza e volume muscolare",taken:!1},{name:"Iso-FUJI Whey Isolate",dosage:"30g",timing:"Post-workout (entro 30min)",benefits:"Sintesi proteica e recupero",taken:!1},{name:"BCAA",dosage:"10g",timing:"Durante workout",benefits:"Energia e anti-catabolismo",taken:!1},{name:"Beta-Alanina",dosage:"3g",timing:"Pre-workout (30min prima)",benefits:"Resistenza muscolare",taken:!1},{name:"Caffeina",dosage:"200mg",timing:"Pre-workout (45min prima)",benefits:"Energia e focus",taken:!1}]),[r,n]=s.useState([{name:"Creatina Creapure",dosage:"5g",timing:"Mattina",benefits:"Mantenimento saturazione",taken:!1},{name:"Multivitaminico",dosage:"1 cpr",timing:"Colazione",benefits:"Supporto generale",taken:!1},{name:"Omega-3",dosage:"2g",timing:"Pranzo",benefits:"Antinfiammatorio",taken:!1},{name:"Magnesio",dosage:"400mg",timing:"Sera",benefits:"Recupero e sonno",taken:!1},{name:"Vitamina D3",dosage:"2000 UI",timing:"Colazione",benefits:"Salute ossea e ormonale",taken:!1}]),l=t?a:r,o=t?i:n,c=l.filter(e=>e.taken).length,d=l.length,m=c/d*100;return N.jsxs("div",{className:"p-4 space-y-6",children:[N.jsxs("div",{className:"text-center py-4",children:[N.jsx("div",{className:"text-4xl mb-2",children:"üíä"}),N.jsx("h1",{className:"text-2xl font-bold tg-text mb-2",children:"Integratori"}),N.jsxs("p",{className:"tg-hint",children:["Piano per ",t?"giorno di allenamento":"giorno di riposo"]})]}),N.jsxs("div",{className:"card",children:[N.jsxs("div",{className:"flex items-center justify-between mb-4",children:[N.jsx("h3",{className:"font-semibold tg-text",children:"Progresso Giornaliero"}),N.jsxs("span",{className:"text-sm tg-hint",children:[c,"/",d]})]}),N.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:N.jsx("div",{className:"bg-green-500 h-3 rounded-full transition-all duration-300",style:{width:`${m}%`}})}),N.jsxs("div",{className:"text-center",children:[N.jsxs("span",{className:"text-2xl font-bold tg-text",children:[Math.round(m),"%"]}),N.jsx("span",{className:"text-sm tg-hint ml-2",children:"completato"})]})]}),N.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[N.jsx("button",{onClick:()=>e("selection"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors "+(t?"tg-button text-white":"tg-text"),children:"üèãÔ∏è Workout Day"}),N.jsx("button",{onClick:()=>e("selection"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors "+(t?"tg-text":"tg-button text-white"),children:"üò¥ Rest Day"})]}),N.jsx("div",{className:"space-y-3",children:l.map((t,s)=>{return N.jsx("div",{className:"card transition-all duration-200 "+(t.taken?"bg-green-50 border-green-200":"hover:shadow-md"),children:N.jsxs("div",{className:"flex items-start space-x-3",children:[N.jsx("button",{onClick:()=>(t=>{e("impact","light"),o(e=>e.map((e,s)=>s===t?{...e,taken:!e.taken}:e))})(s),className:"mt-1 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all haptic-medium "+(t.taken?"bg-green-500 border-green-500":"border-gray-300 hover:border-green-400"),children:t.taken&&N.jsx($,{className:"w-4 h-4 text-white"})}),N.jsxs("div",{className:"flex-1",children:[N.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[N.jsx("h4",{className:"font-semibold "+(t.taken?"text-green-700 line-through":"tg-text"),children:t.name}),N.jsx("span",{className:"text-sm font-medium tg-link",children:t.dosage})]}),N.jsx("div",{className:"flex items-center space-x-4 text-sm tg-hint mb-2",children:N.jsxs("span",{className:"flex items-center",children:[(a=t.timing,a.includes("Pre-workout")||a.includes("Mattina")?"üåÖ":a.includes("Durante")?"üèãÔ∏è":a.includes("Post-workout")||a.includes("Pranzo")?"üçΩÔ∏è":a.includes("Sera")?"üåô":"‚è∞"),N.jsx("span",{className:"ml-1",children:t.timing})]})}),N.jsx("p",{className:"text-sm tg-hint",children:t.benefits})]})]})},s);var a})}),N.jsx("div",{className:"card tg-secondary-bg",children:N.jsxs("div",{className:"flex items-start space-x-3",children:[N.jsx(R,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),N.jsxs("div",{children:[N.jsx("h4",{className:"font-semibold tg-text mb-1",children:"üí° Suggerimenti"}),N.jsxs("ul",{className:"text-sm tg-hint space-y-1",children:[N.jsx("li",{children:"‚Ä¢ Assumi la creatina sempre alla stessa ora"}),N.jsx("li",{children:"‚Ä¢ Bevi molta acqua con la creatina"}),N.jsx("li",{children:"‚Ä¢ Le proteine sono pi√π efficaci entro 30min dal workout"}),N.jsx("li",{children:"‚Ä¢ Il magnesio aiuta il sonno se preso la sera"})]})]})]})}),N.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[N.jsx("button",{onClick:()=>{e("notification","success"),o(e=>e.map(e=>({...e,taken:!0})))},className:"btn btn-success py-3 haptic-medium",children:"‚úÖ Segna Tutti"}),N.jsx("button",{onClick:()=>{e("selection"),o(e=>e.map(e=>({...e,taken:!1})))},className:"btn btn-secondary py-3 haptic-light",children:"üîÑ Reset"})]})]})},be=()=>N.jsxs("div",{className:"fixed inset-0 flex flex-col items-center justify-center tg-bg z-50",children:[N.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:"üí™"}),N.jsx("h1",{className:"text-2xl font-bold tg-text mb-2",children:"Phoenix Workout"}),N.jsx("p",{className:"tg-hint text-sm",children:"Il tuo Personal Trainer"}),N.jsxs("div",{className:"mt-8 flex space-x-2",children:[N.jsx("div",{className:"w-2 h-2 tg-button rounded-full animate-bounce"}),N.jsx("div",{className:"w-2 h-2 tg-button rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),N.jsx("div",{className:"w-2 h-2 tg-button rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]});function fe(){const{signIn:e,signUp:t,signInWithMagicLink:a}=O(),[i,r]=s.useState(""),[n,l]=s.useState(""),[o,c]=s.useState(!1),[d,m]=s.useState(""),[u,x]=s.useState("magic"),[h,g]=s.useState(!1);return h?N.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex items-center justify-center p-4",children:N.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-lg rounded-2xl p-8 max-w-md w-full text-center",children:[N.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:N.jsx(X,{className:"w-8 h-8 text-green-400"})}),N.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Controlla la tua email!"}),N.jsxs("p",{className:"text-gray-400 mb-6",children:["Abbiamo inviato un link magico a ",N.jsx("span",{className:"text-purple-400",children:i})]}),N.jsx("p",{className:"text-sm text-gray-500",children:"Clicca sul link nell'email per accedere automaticamente."}),N.jsx("button",{onClick:()=>g(!1),className:"mt-6 text-purple-400 hover:text-purple-300 text-sm",children:"Usa un'altra email"})]})}):N.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex items-center justify-center p-4",children:N.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-lg rounded-2xl p-8 max-w-md w-full",children:[N.jsxs("div",{className:"text-center mb-8",children:[N.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-purple-500/30",children:N.jsx(G,{className:"w-10 h-10 text-white"})}),N.jsx("h1",{className:"text-3xl font-bold text-white",children:"LinkinFit"}),N.jsx("p",{className:"text-gray-400 mt-2",children:"Il tuo personal trainer digitale"})]}),N.jsxs("form",{onSubmit:async s=>{s.preventDefault(),c(!0),m("");try{if("magic"===u){const{error:e}=await a(i);if(e)throw e;g(!0)}else if("login"===u){const{error:t}=await e(i,n);if(t)throw t}else{const{error:e}=await t(i,n);if(e)throw e}}catch(r){m(r instanceof Error?r.message:"Errore durante l'accesso")}finally{c(!1)}},className:"space-y-4",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),N.jsxs("div",{className:"relative",children:[N.jsx(X,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),N.jsx("input",{type:"email",value:i,onChange:e=>r(e.target.value),placeholder:"la.tua@email.com",className:"w-full bg-gray-700/50 border border-gray-600 rounded-xl py-3 pl-11 pr-4 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500",required:!0})]})]}),"magic"!==u&&N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),N.jsxs("div",{className:"relative",children:[N.jsx(Y,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),N.jsx("input",{type:"password",value:n,onChange:e=>l(e.target.value),placeholder:"La tua password",className:"w-full bg-gray-700/50 border border-gray-600 rounded-xl py-3 pl-11 pr-4 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500",required:!0})]})]}),d&&N.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-xl p-3 text-red-400 text-sm",children:d}),N.jsx("button",{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold py-3 rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:o?N.jsxs(N.Fragment,{children:[N.jsx(Z,{className:"w-5 h-5 animate-spin"}),"Caricamento..."]}):"magic"===u?"Invia Link Magico":"login"===u?"Accedi":"Registrati"})]}),N.jsx("div",{className:"mt-6 text-center space-y-2",children:"magic"===u?N.jsx("button",{onClick:()=>x("login"),className:"text-gray-400 hover:text-white text-sm",children:"Preferisci usare email e password?"}):N.jsxs(N.Fragment,{children:[N.jsx("button",{onClick:()=>x("magic"),className:"text-purple-400 hover:text-purple-300 text-sm block w-full",children:"Accedi con Link Magico (consigliato)"}),N.jsx("button",{onClick:()=>x("login"===u?"register":"login"),className:"text-gray-400 hover:text-white text-sm",children:"login"===u?"Non hai un account? Registrati":"Hai gia un account? Accedi"})]})})]})})}function ye(){const[e,t]=s.useState(!0),[a,i]=s.useState(null),{webApp:r,isAvailable:n}=_(),{user:l,loading:o}=O();return s.useEffect(()=>{o||(async()=>{var e,s;try{if(l)i({id:1019529575,first_name:(null==(e=l.email)?void 0:e.split("@")[0])||"Manuel",last_name:"",username:(null==(s=l.email)?void 0:s.split("@")[0])||"manuel",language_code:"it"});else{const e=window.telegramUser||null;i(e)}r&&n&&(r.MainButton.setText("Inizia Workout"),r.MainButton.show(),r.BackButton.onClick(()=>{window.history.back()}),console.log("Telegram WebApp configured")),await new Promise(e=>setTimeout(e,1e3))}catch(a){console.error("Error initializing app:",a)}finally{t(!1)}})()},[r,n,l,o]),e||o?N.jsx(be,{}):a||l?N.jsx(M,{user:a||{id:0,first_name:"Guest"},children:N.jsx(c,{children:N.jsx("div",{className:"min-h-screen tg-bg",children:N.jsx(d,{children:N.jsxs(m,{path:"/",element:N.jsx(de,{}),children:[N.jsx(m,{index:!0,element:N.jsx(me,{})}),N.jsx(m,{path:"workout",element:N.jsx(ue,{})}),N.jsx(m,{path:"statistics",element:N.jsx(xe,{})}),N.jsx(m,{path:"ai-coach",element:N.jsx(he,{})}),N.jsx(m,{path:"supplements",element:N.jsx(pe,{})}),N.jsx(m,{path:"settings",element:N.jsx(ge,{})})]})})})})}):N.jsx(fe,{})}function je(){return N.jsx(T,{children:N.jsx(ye,{})})}w.createRoot(document.getElementById("root")).render(N.jsx(i.StrictMode,{children:N.jsx(je,{})}));
